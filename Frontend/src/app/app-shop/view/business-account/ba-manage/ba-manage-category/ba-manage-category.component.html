<div
  class="
                    d-flex
                    flex-sm-row flex-column
                    align-items-sm-center align-items-stretch
                    justify-content-between
                    pb-4
                    mb-2 mb-md-3
                  "
>
  <div class="d-flex flex-sm-row">
    <button id="btnAddCategory"
      class="
                        btn btn-icon btn-outline-primary btn-xs
                        rounded-circle
                        shadow-sm
                      "
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#add-new-category"
      aria-controls="add-new-category"
      aria-expanded="false"
      title="Add new category"
      data-bs-original-title="Add new category"
      aria-label="Add new category"
    >
      <i class="fi-plus"></i>
    </button>
    <h3 class="h4 mb-sm-0 ms-2">
      <!-- <i class="fi-info-circle mt-n1 me-2 lead align-middle text-warning"></i> -->
      Category
    </h3>
  </div>
  <div class="d-flex align-items-center ms-sm-4">
    <label
      class="fs-sm me-2 pe-1 text-nowrap"
      for="review-sorting1"
    ><i class="fi-arrows-sort text-muted mt-n1 me-2"></i>Sort
      by:</label
    >
    <select
      class="form-select form-select-sm"
    >
      <option>Newest</option>
      <option>Oldest</option>
      <option>Popular</option>
      <option>High rating</option>
      <option>Low rating</option>
    </select>
  </div>
</div>
<div class="collapse" id="add-new-category">
  <div class="card card-body">

    <form #baManageFormCategory="ngForm" (ngSubmit)="baManageFormCategory.form.valid && onSubmit()" novalidate>

      <div class="row">
        <div class="col-md-8 mb-3">
          <label class="form-label" for="validationTooltipc1"
          >Title</label
          >
          <a class="btn btn-icon btn-light btn-xs text-primary content-overlay mb-2 ms-auto help"
             data-bs-toggle="tooltip" title="" data-bs-original-title="Suitable title for describe category"
             aria-label="Suitable title for describe category"><i class="fi-help"></i>
          </a>
          <input
            class="form-control"
            type="text"
            placeholder="Title"
            required
            [(ngModel)]="itemCategory.name" #categoryTitle="ngModel" name="categoryTitle"
          />
          <div *ngIf="(categoryTitle.touched || baManageFormCategory.submitted) && categoryTitle.errors?.required"
               class="validErr">
            Title is required
          </div>
          <div class="valid-tooltip">Looks good!</div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-12 mb-3">
          <label class="form-label"
          >Business type </label
          >
          <a class="btn btn-icon btn-light btn-xs text-primary content-overlay mb-2 ms-auto help"
             data-bs-toggle="tooltip" title="Select this item belongs to which type of business"
             data-bs-original-title="Select this item belongs to which type of business"
             aria-label="Select this item belongs to which type of business"><i class="fi-help"></i>
          </a>
          <!-- <div class="d-flex flex-column flex-sm-row"> -->
          <ng-select
            [items]="businessCategories"
            bindLabel="name"
            placeholder="Select Business Type"
            dropdownPosition="auto"
            [multiple]="false"
            [searchWhileComposing]="true"
            name="businessProfileCategories"
            #businessProfileCategories="ngModel" required
            (change)="getItems('n')"
            [(ngModel)]="itemCategory.businessProfileCategory.businessCategory">
          </ng-select>
          <div
            *ngIf="(businessProfileCategories.touched || baManageFormCategory.submitted) && businessProfileCategories.errors?.required"
            class="validErr">
            Business type is required
          </div>
          <!-- <div class="invalid-tooltip">
            Please fill item quantity
          </div>
          <div class="valid-tooltip">Looks good!</div> -->
          <!-- <button type="button" class="btn btn-light-primary btn-icon shadow-sm">
            <i class="fi-plus"></i>
          </button> -->
          <!-- <button class="btn btn-translucent-primary rounded-pill" type="button">Add</button> -->
          <!-- </div> -->

        </div>
      </div>

      <div class="row">
        <div class="col-md-12 mb-3">
          <label class="form-label" for="validationTooltip04"
          >Items</label
          >
          <a class="btn btn-icon btn-light btn-xs text-primary content-overlay mb-2 ms-auto help"
             data-bs-toggle="tooltip" title="You can add if there any features"
             data-bs-original-title="You can add if there any features"
             aria-label="You can add if there any features"><i class="fi-help"></i>
          </a>
          <!--<a href="#new-feature-edit" data-bs-toggle="modal" data-bs-dismiss="modal"-->
          <!--class="btn btn-icon btn-light btn-xs text-primary content-overlay mb-2 ms-3 fw-bold"-->
          <!--title="You can create new feature." data-bs-original-title="You can create new feature."-->
          <!--aria-label="You can create new feature." style="padding-left: 20px;padding-top: 4px">Add Item-->
          <!--</a>-->

          <!--<form #baManageFormCategoryItemExs="ngForm"-->
          <!--(ngSubmit)="baManageFormCategoryItemExs.form.valid && addItem('n')"-->
          <!--novalidate>-->

          <div class="d-flex flex-column flex-sm-row">
            <div style="width: 100%">
              <div>
                <ng-select
                  [items]="itemsToAdd"
                  bindLabel="name"
                  placeholder="Select Item"
                  dropdownPosition="auto"
                  [multiple]="true"
                  [searchWhileComposing]="true"
                  name="items"
                  #items="ngModel" required
                  [(ngModel)]="itemCategory.items"
                  style="width: 100%">
                </ng-select>
              </div>
              <div *ngIf="(baManageFormCategory.submitted) && itemCategory.items.length===0"
                   class="validErr">
                Item is required
              </div>
              <!--<div style="color: blue;padding-left: 10px;padding-top: 5px">-->
              <!--Add new feature-->
              <!--</div>-->
            </div>
            <!-- <div class="invalid-tooltip">
              Please fill item quantity
            </div>
            <div class="valid-tooltip">Looks good!</div> -->
            <!--<button style="margin-left: 10px" type="submit"-->
            <!--class="btn btn-light-primary btn-icon shadow-sm">-->
            <!--<i class="fi-plus"></i>-->
            <!--</button>-->
            <!-- <button class="btn btn-translucent-primary rounded-pill" type="button">Add</button> -->
          </div>
          <!--</form>-->

        </div>
      </div>

      <div class="row">
        <div class="col-md-12 mb-3">
          <label class="form-label" for="validationTooltipc2"
          >Description</label
          >
          <a class="btn btn-icon btn-light btn-xs text-primary content-overlay mb-2 ms-auto help"
             data-bs-toggle="tooltip" title="Small description about your category."
             data-bs-original-title="Small description about your category."
             aria-label="Small description about your category."><i class="fi-help"></i>
          </a>
          <textarea class="form-control" id="validationTooltip05" rows="5" placeholder="Description"
                    [(ngModel)]="itemCategory.description" name="categoryDescription"></textarea>
          <div class="invalid-tooltip">
            Please fill item discount
          </div>
          <div class="valid-tooltip">Looks good!</div>
        </div>
      </div>

      <div class="mb-3 py-2">
        <div class="form-check">
          <input
            class="form-check-input"
            type="checkbox"
            id="invalidCheck"
            [(ngModel)]="itemCategory.isNewCategory"
            name="newCategory"
            required
          />
          <label class="form-check-label" for="invalidCheck"
          >I confirm that the information provided information is accurate and correct.</label
          >
          <div class="invalid-tooltip">
            You must agree before submitting.
          </div>
        </div>
      </div>
      <button class="btn btn-primary btn-md" type="submit" [disabled]="!itemCategory.isNewCategory">
        Save
      </button>
    </form>
  </div>
</div>

<!--<div class="row" style="margin-top: 30px">-->
  <!--<div class="col-md-12 mb-3">-->
    <!--&lt;!&ndash;<label class="form-label"&ndash;&gt;-->
    <!--&lt;!&ndash;&gt;Business type </label&ndash;&gt;-->
    <!--&lt;!&ndash;&gt;&ndash;&gt;-->
    <!--&lt;!&ndash;<a class="btn btn-icon btn-light btn-xs text-primary content-overlay mb-2 ms-auto help"&ndash;&gt;-->
    <!--&lt;!&ndash;data-bs-toggle="tooltip" title="Select this item belongs to which type of business"&ndash;&gt;-->
    <!--&lt;!&ndash;data-bs-original-title="Select this item belongs to which type of business"&ndash;&gt;-->
    <!--&lt;!&ndash;aria-label="Select this item belongs to which type of business"><i class="fi-help"></i>&ndash;&gt;-->
    <!--&lt;!&ndash;</a>&ndash;&gt;-->
    <!--&lt;!&ndash; <div class="d-flex flex-column flex-sm-row"> &ndash;&gt;-->
    <!--<ng-select-->
      <!--[items]="businessCategories"-->
      <!--bindLabel="name"-->
      <!--placeholder="Select Business Type"-->
      <!--dropdownPosition="auto"-->
      <!--[multiple]="false"-->
      <!--[searchWhileComposing]="true"-->
      <!--(change)="getItemCategoriesOrdered();getItems('e')"-->
      <!--[(ngModel)]="businessProfileCategory">-->
    <!--</ng-select>-->
    <!--&lt;!&ndash; <div class="invalid-tooltip">-->
      <!--Please fill item quantity-->
    <!--</div>-->
    <!--<div class="valid-tooltip">Looks good!</div> &ndash;&gt;-->
    <!--&lt;!&ndash; <button type="button" class="btn btn-light-primary btn-icon shadow-sm">-->
      <!--<i class="fi-plus"></i>-->
    <!--</button> &ndash;&gt;-->
    <!--&lt;!&ndash; <button class="btn btn-translucent-primary rounded-pill" type="button">Add</button> &ndash;&gt;-->
    <!--&lt;!&ndash; </div> &ndash;&gt;-->

  <!--</div>-->
<!--</div>-->

<div class="row g-4 py-1">
  <!-- Accordion basic -->
  <div class="accordion" id="category-list">

    <!-- Accordion item -->
    <div class="accordion-item" *ngFor="let itemCategoryE of categories;let i = index"
    style="border-width: 2px">
      <div class="accordion-header d-flex" id="headingOne">
        <div class="p-2 flex-grow-1 bd-highlight">
          <a class="nav-link">{{itemCategoryE.name}}</a>
        </div>
        <div class="p-2 bd-highlight">
          <a type="button" class="nav-link hover-text-danger">
            <i class="fi-trash"></i>
          </a>
        </div>
        <div class="p-2 bd-highlight">
          <a type="button" class="nav-link hover-text-info" data-bs-toggle="collapse"
             [attr.data-bs-target]="'#categoryEdit' + i" aria-expanded="true" aria-controls="categoryOneEdit"
             value="{{itemCategoryE.itemCategoryId}}">
            <i class="fi-edit"></i>
          </a>
        </div>
        <div class="p-2 bd-highlight">
          <button id="btnCategory{{i}}" class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                  [attr.data-bs-target]="'#category' + i"
                  aria-expanded="true" aria-controls="categoryOne" value="{{itemCategoryE.itemCategoryId}}"></button>
        </div>
      </div>
      <div class="accordion-collapse collapse" aria-labelledby="headingEdit" data-bs-parent="#category-list"
           id="categoryEdit{{i}}">
        <div class="card card-body border-none">
          <form #baManageFormCategoryE="ngForm" (ngSubmit)="baManageFormCategoryE.form.valid && onSubmitE(itemCategoryE,i)" novalidate>

            <div class="row">
              <div class="col-md-8 mb-3">
                <label class="form-label" for="validationTooltipc1"
                >Title</label
                >
                <a class="btn btn-icon btn-light btn-xs text-primary content-overlay mb-2 ms-auto help"
                   data-bs-toggle="tooltip" title="" data-bs-original-title="Suitable title for describe category"
                   aria-label="Suitable title for describe category"><i class="fi-help"></i>
                </a>
                <input
                  class="form-control"
                  type="text"
                  placeholder="Title"
                  required
                  [(ngModel)]="itemCategoryE.name" #categoryTitleE="ngModel" name="categoryTitle"
                />
                <div
                  *ngIf="(categoryTitleE.touched || baManageFormCategoryE.submitted) && categoryTitleE.errors?.required"
                  class="validErr">
                  Title is required
                </div>
                <div class="valid-tooltip">Looks good!</div>
              </div>
            </div>

            <div class="row">
              <div class="col-md-12 mb-3">
                <label class="form-label"
                >Business type </label
                >
                <a class="btn btn-icon btn-light btn-xs text-primary content-overlay mb-2 ms-auto help"
                   data-bs-toggle="tooltip" title="Select this item belongs to which type of business"
                   data-bs-original-title="Select this item belongs to which type of business"
                   aria-label="Select this item belongs to which type of business"><i class="fi-help"></i>
                </a>
                <!-- <div class="d-flex flex-column flex-sm-row"> -->
                <ng-select
                  [items]="businessCategories"
                  bindLabel="name"
                  placeholder="Select Business Type"
                  dropdownPosition="auto"
                  [multiple]="false"
                  [searchWhileComposing]="true"
                  name="businessProfileCategories"
                  #businessProfileCategoriesE="ngModel" required
                  (change)="getItems('e',itemCategoryE)"
                  [(ngModel)]="itemCategoryE.businessProfileCategory.businessCategory">
                </ng-select>
                <div
                  *ngIf="(businessProfileCategoriesE.touched || baManageFormCategoryE.submitted) && businessProfileCategoriesE.errors?.required"
                  class="validErr">
                  Business type is required
                </div>
                <!-- <div class="invalid-tooltip">
                  Please fill item quantity
                </div>
                <div class="valid-tooltip">Looks good!</div> -->
                <!-- <button type="button" class="btn btn-light-primary btn-icon shadow-sm">
                  <i class="fi-plus"></i>
                </button> -->
                <!-- <button class="btn btn-translucent-primary rounded-pill" type="button">Add</button> -->
                <!-- </div> -->

              </div>
            </div>

            <div class="row">
              <div class="col-md-12 mb-3">
                <label class="form-label" for="validationTooltip04"
                >Items</label
                >
                <a class="btn btn-icon btn-light btn-xs text-primary content-overlay mb-2 ms-auto help"
                   data-bs-toggle="tooltip" title="You can add if there any features"
                   data-bs-original-title="You can add if there any features"
                   aria-label="You can add if there any features"><i class="fi-help"></i>
                </a>
                <!--<a href="#new-feature-edit" data-bs-toggle="modal" data-bs-dismiss="modal"-->
                <!--class="btn btn-icon btn-light btn-xs text-primary content-overlay mb-2 ms-3 fw-bold"-->
                <!--title="You can create new feature." data-bs-original-title="You can create new feature."-->
                <!--aria-label="You can create new feature." style="padding-left: 20px;padding-top: 4px">Add Item-->
                <!--</a>-->

                <!--<form #baManageFormCategoryItemExs="ngForm"-->
                <!--(ngSubmit)="baManageFormCategoryItemExs.form.valid && addItem('n')"-->
                <!--novalidate>-->

                <div class="d-flex flex-column flex-sm-row">
                  <div style="width: 100%">
                    <div>
                      <ng-select
                        [items]="itemsToAddE"
                        bindLabel="name"
                        placeholder="Select Item"
                        dropdownPosition="auto"
                        [multiple]="true"
                        [searchWhileComposing]="true"
                        name="items"
                        #itemsE="ngModel" required
                        [(ngModel)]="itemCategoryE.items"
                        style="width: 100%">
                      </ng-select>
                    </div>
                    <div *ngIf="(baManageFormCategoryE.submitted) && itemCategoryE.items.length===0"
                         class="validErr">
                      Item is required
                    </div>
                    <!--<div style="color: blue;padding-left: 10px;padding-top: 5px">-->
                    <!--Add new feature-->
                    <!--</div>-->
                  </div>
                  <!-- <div class="invalid-tooltip">
                    Please fill item quantity
                  </div>
                  <div class="valid-tooltip">Looks good!</div> -->
                  <!--<button style="margin-left: 10px" type="submit"-->
                  <!--class="btn btn-light-primary btn-icon shadow-sm">-->
                  <!--<i class="fi-plus"></i>-->
                  <!--</button>-->
                  <!-- <button class="btn btn-translucent-primary rounded-pill" type="button">Add</button> -->
                </div>
                <!--</form>-->

              </div>
            </div>

            <div class="row">
              <div class="col-md-12 mb-3">
                <label class="form-label" for="validationTooltipc2"
                >Description</label
                >
                <a class="btn btn-icon btn-light btn-xs text-primary content-overlay mb-2 ms-auto help"
                   data-bs-toggle="tooltip" title="Small description about your category."
                   data-bs-original-title="Small description about your category."
                   aria-label="Small description about your category."><i class="fi-help"></i>
                </a>
                <textarea class="form-control" id="validationTooltip05" rows="5" placeholder="Description"
                          [(ngModel)]="itemCategoryE.description" name="categoryDescription"></textarea>
                <div class="invalid-tooltip">
                  Please fill item discount
                </div>
                <div class="valid-tooltip">Looks good!</div>
              </div>
            </div>

            <div class="mb-3 py-2">
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="invalidCheck"
                  required
                  name="isUpdateCategory"
                  [(ngModel)]="itemCategoryE.isUpdateCategory"
                />
                <label class="form-check-label" for="invalidCheck"
                >I confirm that the information provided information is accurate and correct.</label
                >
                <div class="invalid-tooltip">
                  You must agree before submitting.
                </div>
              </div>
            </div>
            <button class="btn btn-primary btn-md" type="submit" [disabled]="!itemCategoryE.isUpdateCategory">
              Save
            </button>
          </form>
        </div>
      </div>
      <div class="accordion-collapse collapse" aria-labelledby="headingOne" data-bs-parent="#category-list"
           id="category{{i}}">
        <div class="accordion-body">

          <div class="row cols-md-12 mt-3">
            <p class="mb-2 fs-sm text-dark fw-bold">Overview </p>
            <div class="col">
              <p class="mb-2 fs-sm text-muted">{{itemCategoryE.description}} </p>
            </div>
          </div>

          <p class="mb-2 fs-sm text-dark fw-bold">Includes </p>

          <app-ba-manage-item-view [items]="itemCategoryE.items"></app-ba-manage-item-view>

        </div>
      </div>
    </div>

  </div>
</div>
